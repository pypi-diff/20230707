# Comparing `tmp/zhinst_utils-0.3.1-py3-none-any.whl.zip` & `tmp/zhinst_utils-0.3.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,26 +1,26 @@
-Zip file size: 52007 bytes, number of entries: 24
--rw-r--r--  2.0 unx      391 b- defN 23-Feb-03 13:17 zhinst/deviceutils/__init__.py
--rw-r--r--  2.0 unx      349 b- defN 23-Feb-03 13:17 zhinst/deviceutils/shfqa.py
--rw-r--r--  2.0 unx      349 b- defN 23-Feb-03 13:17 zhinst/deviceutils/shfqc.py
--rw-r--r--  2.0 unx      350 b- defN 23-Feb-03 13:17 zhinst/deviceutils/shfsg.py
--rw-r--r--  2.0 unx     1096 b- defN 23-Feb-03 13:17 zhinst/utils/__init__.py
--rw-r--r--  2.0 unx      160 b- defN 23-Apr-04 14:37 zhinst/utils/_version.py
--rw-r--r--  2.0 unx     2222 b- defN 23-Mar-28 10:15 zhinst/utils/api_compatibility.py
--rw-r--r--  2.0 unx     1316 b- defN 23-Mar-28 10:15 zhinst/utils/device_status.py
--rw-r--r--  2.0 unx      140 b- defN 23-Mar-27 13:21 zhinst/utils/exceptions.py
--rw-r--r--  2.0 unx     7451 b- defN 23-Mar-29 06:18 zhinst/utils/feedback_model.py
--rw-r--r--  2.0 unx    51242 b- defN 23-Apr-04 12:10 zhinst/utils/shf_sweeper.py
--rw-r--r--  2.0 unx    12604 b- defN 23-Mar-22 11:47 zhinst/utils/shfsg.py
--rw-r--r--  2.0 unx    52311 b- defN 23-Feb-24 15:51 zhinst/utils/utils.py
--rw-r--r--  2.0 unx     1918 b- defN 23-Feb-03 13:17 zhinst/utils/versioning.py
--rw-r--r--  2.0 unx      782 b- defN 23-Feb-03 13:17 zhinst/utils/shfqa/__init__.py
--rw-r--r--  2.0 unx    15185 b- defN 23-Mar-22 11:47 zhinst/utils/shfqa/multistate.py
--rw-r--r--  2.0 unx    22865 b- defN 23-Mar-22 11:47 zhinst/utils/shfqa/shfqa.py
--rw-r--r--  2.0 unx      819 b- defN 23-Feb-03 13:17 zhinst/utils/shfqc/__init__.py
--rw-r--r--  2.0 unx    24228 b- defN 23-Feb-24 15:51 zhinst/utils/shfqc/shfqc.py
--rw-rw-rw-  2.0 unx     1075 b- defN 23-Apr-04 14:37 zhinst_utils-0.3.1.dist-info/LICENSE
--rw-r--r--  2.0 unx     2250 b- defN 23-Apr-04 14:37 zhinst_utils-0.3.1.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-04 14:37 zhinst_utils-0.3.1.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 23-Apr-04 14:37 zhinst_utils-0.3.1.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2009 b- defN 23-Apr-04 14:37 zhinst_utils-0.3.1.dist-info/RECORD
-24 files, 201211 bytes uncompressed, 48757 bytes compressed:  75.8%
+Zip file size: 52130 bytes, number of entries: 24
+-rw-r--r--  2.0 unx      391 b- defN 23-Jul-05 07:57 zhinst/deviceutils/__init__.py
+-rw-r--r--  2.0 unx      349 b- defN 23-Jul-05 07:57 zhinst/deviceutils/shfqa.py
+-rw-r--r--  2.0 unx      349 b- defN 23-Jul-05 07:57 zhinst/deviceutils/shfqc.py
+-rw-r--r--  2.0 unx      350 b- defN 23-Jul-05 07:57 zhinst/deviceutils/shfsg.py
+-rw-r--r--  2.0 unx     1096 b- defN 23-Jul-05 07:57 zhinst/utils/__init__.py
+-rw-r--r--  2.0 unx      160 b- defN 23-Jul-07 14:12 zhinst/utils/_version.py
+-rw-r--r--  2.0 unx     2222 b- defN 23-Jul-05 07:57 zhinst/utils/api_compatibility.py
+-rw-r--r--  2.0 unx     1316 b- defN 23-Jul-05 07:57 zhinst/utils/device_status.py
+-rw-r--r--  2.0 unx      140 b- defN 23-Jul-05 07:57 zhinst/utils/exceptions.py
+-rw-r--r--  2.0 unx     7451 b- defN 23-Jul-05 07:57 zhinst/utils/feedback_model.py
+-rw-r--r--  2.0 unx    51666 b- defN 23-Jul-05 08:12 zhinst/utils/shf_sweeper.py
+-rw-r--r--  2.0 unx    12604 b- defN 23-Jul-05 07:57 zhinst/utils/shfsg.py
+-rw-r--r--  2.0 unx    52311 b- defN 23-Jul-05 07:57 zhinst/utils/utils.py
+-rw-r--r--  2.0 unx     1918 b- defN 23-Jul-05 07:57 zhinst/utils/versioning.py
+-rw-r--r--  2.0 unx      782 b- defN 23-Jul-05 07:57 zhinst/utils/shfqa/__init__.py
+-rw-r--r--  2.0 unx    15185 b- defN 23-Jul-05 07:57 zhinst/utils/shfqa/multistate.py
+-rw-r--r--  2.0 unx    22865 b- defN 23-Jul-06 09:05 zhinst/utils/shfqa/shfqa.py
+-rw-r--r--  2.0 unx      819 b- defN 23-Jul-05 07:57 zhinst/utils/shfqc/__init__.py
+-rw-r--r--  2.0 unx    24228 b- defN 23-Jul-06 09:05 zhinst/utils/shfqc/shfqc.py
+-rw-rw-rw-  2.0 unx     1075 b- defN 23-Jul-07 14:12 zhinst_utils-0.3.2.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2250 b- defN 23-Jul-07 14:12 zhinst_utils-0.3.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-07 14:12 zhinst_utils-0.3.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 23-Jul-07 14:12 zhinst_utils-0.3.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2009 b- defN 23-Jul-07 14:12 zhinst_utils-0.3.2.dist-info/RECORD
+24 files, 201635 bytes uncompressed, 48880 bytes compressed:  75.8%
```

## zipnote {}

```diff
@@ -51,23 +51,23 @@
 
 Filename: zhinst/utils/shfqc/__init__.py
 Comment: 
 
 Filename: zhinst/utils/shfqc/shfqc.py
 Comment: 
 
-Filename: zhinst_utils-0.3.1.dist-info/LICENSE
+Filename: zhinst_utils-0.3.2.dist-info/LICENSE
 Comment: 
 
-Filename: zhinst_utils-0.3.1.dist-info/METADATA
+Filename: zhinst_utils-0.3.2.dist-info/METADATA
 Comment: 
 
-Filename: zhinst_utils-0.3.1.dist-info/WHEEL
+Filename: zhinst_utils-0.3.2.dist-info/WHEEL
 Comment: 
 
-Filename: zhinst_utils-0.3.1.dist-info/top_level.txt
+Filename: zhinst_utils-0.3.2.dist-info/top_level.txt
 Comment: 
 
-Filename: zhinst_utils-0.3.1.dist-info/RECORD
+Filename: zhinst_utils-0.3.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## zhinst/utils/_version.py

```diff
@@ -1,4 +1,4 @@
 # file generated by setuptools_scm
 # don't change, don't track in version control
-__version__ = version = '0.3.1'
-__version_tuple__ = version_tuple = (0, 3, 1)
+__version__ = version = '0.3.2'
+__version_tuple__ = version_tuple = (0, 3, 2)
```

## zhinst/utils/shf_sweeper.py

```diff
@@ -483,14 +483,15 @@
 
     waveform: np.complex128 = None  #: the complex envelope waveform vector
     delay: float = 0.0  #: time delay the waveform is generated after the trigger
 
 
 Config = namedtuple("Config", ["sweep", "avg", "rf", "trig"])
 
+
 # pylint: disable=too-many-instance-attributes
 class ShfSweeper:
     """
     Class to set up and run a sweep on an SHFQA
 
     Arguments:
         daq (zhinst.core.ziDAQServer):
@@ -521,28 +522,32 @@
         /{dev}/qachannels/{rf.channel}/spectroscopy/result/acquired
         /{dev}/qachannels/{rf.channel}/spectroscopy/result/data/wave
 
         Returns:
             A dictionary with measurement data of the sweep
         """
         self._init_sweep()
-        self._run_freq_sweep()
-        return self.get_result()
+        maybe_data = self._run_freq_sweep()
+        return self.get_result(data=maybe_data)
 
-    def get_result(self) -> t.Dict[str, t.Any]:
+    def get_result(self, data=None) -> t.Dict[str, t.Any]:
         """Get the result of the sweep.
 
+        Args:
+            data (dict): optional data. If not provided, the data is fetched
+                from the device.
+
         Returns:
             A dictionary with measurement data of the last sweep.
         """
-        data = self._get_result_logger_data()
-        vec = self._result
+        if data is None:
+            data = self._get_result_logger_data()
+            data["vector"] = self._result
         if not self._sweep.use_sequencer:
-            vec = self._average_samples(vec)
-        data["vector"] = vec
+            data["vector"] = self._average_samples(data["vector"])
         props = data["properties"]
         props["centerfreq"] = self._rf.center_freq
         props["startfreq"] = self._sweep.start_freq
         props["stopfreq"] = self._sweep.stop_freq
         props["numpoints"] = self._sweep.num_points
         props["mapping"] = self._sweep.mapping
         return data
@@ -554,15 +559,14 @@
         import matplotlib.pyplot as plt
 
         freq = self.get_offset_freq_vector()
         freq_mhz = freq / 1e6
 
         data = self.get_result()
         if self._sweep.psd:
-
             y_data = 10 * np.log10(np.real(data["vector"]) * 1e3 / input_impedance_ohm)
             y_label = "power spectral density [dBm / Hz]"
         else:
             y_data = utils.volt_rms_to_dbm(
                 data["vector"], input_impedance_ohm=input_impedance_ohm
             )
             y_label = "power [dBm]"
@@ -905,15 +909,15 @@
 
     def _issue_single_sw_trigger(self):
         self._daq.syncSetInt(f"/{self._dev}/system/swtriggers/0/single", 1)
 
     def _enable_measurement(self):
         self._daq.syncSetInt(self._spec_enable_path, 1)
 
-    def _get_data_after_measurement(self):
+    def _get_vector_after_measurement(self):
         data = self._get_result_logger_data()
         return data["vector"]
 
     def _set_freq_to_device(self, freq: float):
         """
         Configures a frequency on the device
 
@@ -982,15 +986,15 @@
             if acquired_path in poll_results:
                 results = poll_results[acquired_path]["value"][-1]
                 elapsed_time_since_result = 0
             else:
                 elapsed_time_since_result += poll_duration
 
             if data_path in poll_results:
-                result_logger_data = poll_results[data_path][0]["vector"]
+                result_logger_data = poll_results[data_path][0]
 
             if elapsed_time_since_print >= print_interval:
                 _print_sweep_progress(
                     results, expected_num_results, self._get_freq_sequencer(results)
                 )
                 elapsed_time_since_print = 0
             else:
@@ -1080,46 +1084,47 @@
             self._daq,
             self._acquired_path,
             expected_results,
             timeout=wait_time,
             sleep_time=0.02,
         )
 
-    def _run_freq_sweep(self):
+    def _run_freq_sweep(self) -> t.Optional[t.Dict[str, t.Any]]:
         """
         Runs the frequency sweep.
         Dispatches between the different sweep approaches.
         """
         if self._sweep.use_sequencer:
-            self._run_freq_sweep_sequencer()
-        elif self._is_sw_triggered:
-            self._run_freq_sweep_host_sw_trig()
-        else:
-            self._run_freq_sweep_host()
+            return self._run_freq_sweep_sequencer()
+        if self._is_sw_triggered:
+            return self._run_freq_sweep_host_sw_trig()
+        return self._run_freq_sweep_host()
 
-    def _run_freq_sweep_sequencer(self):
+    def _run_freq_sweep_sequencer(self) -> t.Dict[str, t.Any]:
         """
         Runs the frequency sweep with the sequencer-based approach.
         """
         self._print_sweep_details()
         num_results = self._configure_result_length_and_averages_sequencer()
         _subscribe_with_assert(self._daq, self._data_path)
         _subscribe_with_assert(self._daq, self._acquired_path)
         self._daq.sync()
         self._enable_measurement()
         self._enable_sequencer()
         try:
-            self._result = self._poll_results(
+            result_logger_data = self._poll_results(
                 self._data_path, self._acquired_path, num_results
             )
+            self._result = result_logger_data["vector"]
         finally:
             self._daq.unsubscribe(self._data_path)
             self._daq.unsubscribe(self._acquired_path)
+        return result_logger_data
 
-    def _run_freq_sweep_host_sw_trig(self):
+    def _run_freq_sweep_host_sw_trig(self) -> t.Dict[str, t.Any]:
         """
         Runs the frequency sweep with the host-based approach using the software trigger
         """
         self._print_sweep_details()
         freq_vec = self._get_freq_vec_host()
         self._configure_result_length_and_averages_host()
         self._enable_measurement()
@@ -1129,17 +1134,19 @@
             _print_sweep_progress(i + 1, len(freq_vec), freq)
             self._issue_single_sw_trigger()
             self._wait_for_results_host_sw_trig(
                 expected_results=i + 1, wait_time=self._avg.integration_time
             )
 
         utils.wait_for_state_change(self._daq, self._spec_enable_path, 0, timeout=1.0)
-        self._result = self._get_data_after_measurement()
+        data = self._get_result_logger_data()
+        self._result = data["vector"]
+        return data
 
-    def _run_freq_sweep_host(self):
+    def _run_freq_sweep_host(self) -> None:
         """
         Runs the frequency sweep with the host-based approach (not software-triggered)
         """
         self._print_sweep_details()
         freq_vec = self._get_freq_vec_host()
         num_results = self._configure_result_length_and_averages_host()
         self._result = []
@@ -1151,15 +1158,15 @@
             try:
                 self._wait_for_results_host(freq, num_results)
             except Exception as wait_exception:
                 # make sure we also unsubscribe from the node in case of an exception
                 self._daq.unsubscribe(self._acquired_path)
                 raise wait_exception
 
-            self._result = np.append(self._result, self._get_data_after_measurement())
+            self._result = np.append(self._result, self._get_vector_after_measurement())
 
         # after the sweep has finished, we unsubscribe from the node
         self._daq.unsubscribe(self._acquired_path)
 
     @property
     def actual_settling_time(self) -> float:
         """Wait time between setting new frequency and triggering of integration.
```

## zhinst/utils/shfqa/shfqa.py

```diff
@@ -139,15 +139,15 @@
             settings.append((scope_path + "trigger/enable", 0))
 
     settings.append((scope_path + "length", num_samples))
 
     daq.set(settings)
 
 
-def get_scope_data(daq: ziDAQServer, device_id: str, *, timeout: float = 1.0) -> tuple:
+def get_scope_data(daq: ziDAQServer, device_id: str, *, timeout: float = 5.0) -> tuple:
     """Queries the scope for data once it is finished.
 
     Args:
         daq: Instance of a Zurich Instruments API session connected to a Data
             Server. The device with identifier device_id is assumed to already
             be connected to this instance.
         device_id: SHFQA device identifier, e.g. `dev12004` or 'shf-dev12004'.
```

## zhinst/utils/shfqc/shfqc.py

```diff
@@ -191,15 +191,15 @@
         trigger_input=trigger_input,
         num_segments=num_segments,
         num_averages=num_averages,
         trigger_delay=trigger_delay,
     )
 
 
-def get_scope_data(daq: ziDAQServer, device_id: str, *, timeout: float = 1.0) -> tuple:
+def get_scope_data(daq: ziDAQServer, device_id: str, *, timeout: float = 5.0) -> tuple:
     """Queries the scope for data once it is finished.
 
     Args:
         daq: Instance of a Zurich Instruments API session connected to a Data
             Server. The device with identifier device_id is assumed to already
             be connected to this instance.
         device_id: SHFQC device identifier, e.g. `dev12004` or 'shf-dev12004'.
```

## Comparing `zhinst_utils-0.3.1.dist-info/LICENSE` & `zhinst_utils-0.3.2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `zhinst_utils-0.3.1.dist-info/METADATA` & `zhinst_utils-0.3.2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 Metadata-Version: 2.1
 Name: zhinst-utils
-Version: 0.3.1
+Version: 0.3.2
 Summary: Zurich Instruments utils for device control
 Home-page: https://github.com/zhinst/zhinst-utils
 Author: Zurich Instrument
 Author-email: info@zhinst.com
 Project-URL: Bug Tracker, https://github.com/zhinst/zhinst-utils/issues
 Classifier: Programming Language :: Python :: 3
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Operating System :: OS Independent
 Requires-Python: >=3.7
 Description-Content-Type: text/markdown
 License-File: LICENSE
 Requires-Dist: numpy (>=1.14)
-Requires-Dist: zhinst-core (>=23.02)
+Requires-Dist: zhinst-core (>=23.06)
 
 [![PyPI version](https://badge.fury.io/py/zhinst-utils.svg)](https://badge.fury.io/py/zhinst-utils)
 [![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
 [![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)
 [![Twitter URL](https://img.shields.io/twitter/url/https/twitter.com/fold_left.svg?style=social&label=Follow%20%40zhinst)](https://twitter.com/zhinst)
 
 # Utils for Zurich Instruments LabOne API
```

## Comparing `zhinst_utils-0.3.1.dist-info/RECORD` & `zhinst_utils-0.3.2.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,24 +1,24 @@
 zhinst/deviceutils/__init__.py,sha256=ms43TLwihRE3cpzFYaYP0NjVxKLIWiZE8WNZCsW40dI,391
 zhinst/deviceutils/shfqa.py,sha256=Aie-LUUiVHzpBifbO2Wh-siTqoGzM7MhjDt4qkNzzJ8,349
 zhinst/deviceutils/shfqc.py,sha256=Jc1JXZ9Sav73dqm6wNF3_gdGVUKwj41O7PHa4FTk9Fc,349
 zhinst/deviceutils/shfsg.py,sha256=Xg6th1NAhe93BdukxO_K9VsbqtpsfXRe4I_6HhhOsls,350
 zhinst/utils/__init__.py,sha256=euCLHbOIOExPx_zLsDrFDKHXiqz1btNkYaAkP7nXupg,1096
-zhinst/utils/_version.py,sha256=NpX2iZJQYVxuIsKBfyjQghJWMvGYxwOlfWJ3M_xOU7s,160
+zhinst/utils/_version.py,sha256=y3GIHFtktEeT-ZmP-R2vRfLQseXGaBSAF8PfU53L9n4,160
 zhinst/utils/api_compatibility.py,sha256=yDDFk9PrX-BCx4_D8Iqu3cXdZ3bmwNDxqEOcOFj9dOs,2222
 zhinst/utils/device_status.py,sha256=OfDCI1t6ndmdXYbdbkRslbjFHztAgH-_WT4nrR9qiUo,1316
 zhinst/utils/exceptions.py,sha256=cBdjemeNnwySTX20X4UnZy2m4CXCUO4OKhvmO6LMFXU,140
 zhinst/utils/feedback_model.py,sha256=dHV-00BiFHOJG4Y78Iu003FzxYwAPzGrxzU2yc2GmQk,7451
-zhinst/utils/shf_sweeper.py,sha256=Pn8zxLBUC1fa6344qvIn3y7vF077ycWCFM43JlJOh6E,51242
+zhinst/utils/shf_sweeper.py,sha256=j0RnCTnareMfJPTuTCkXVLMAUvGLyUPG7AEudRq68uE,51666
 zhinst/utils/shfsg.py,sha256=6gSRnAMuvUD5ZcZozNS6_XHmwsEkrG_c2igmZ9DH_AI,12604
 zhinst/utils/utils.py,sha256=NhXQnXDug2rZn0qphEehwqcpJQTx_C39HXah0ovcR9M,52311
 zhinst/utils/versioning.py,sha256=JBZnSzP1e8gr003x_-GkZnsWIHx0NtWgslop6clgFJo,1918
 zhinst/utils/shfqa/__init__.py,sha256=ZEmbnwyeQBJ3MRe6WZbTWZsVzU6lw8N07YWysaDCfPg,782
 zhinst/utils/shfqa/multistate.py,sha256=Z8uods6H0i3jjFrCA5PQ4NxL6lAck6kJtP3ZgMO9zJY,15185
-zhinst/utils/shfqa/shfqa.py,sha256=7DdYU0eXo7uZsoSJi8NcFKNufF8HjSUEJqBvtWNqoog,22865
+zhinst/utils/shfqa/shfqa.py,sha256=gG301XBR9PTJgDkIxTZW4bUIt-aINx-vePwN0krie2c,22865
 zhinst/utils/shfqc/__init__.py,sha256=qy1f2QG0553PcBrR599E73OlMxdm7P_-pYbHXh88QC0,819
-zhinst/utils/shfqc/shfqc.py,sha256=DNKxLUZwoHg52J4KtnTy5JXmzkptFtaOLthdaloI9Fo,24228
-zhinst_utils-0.3.1.dist-info/LICENSE,sha256=7cs0_xLDxPQ2zcHEiV5BrH1B6_2yXWhZidBV7BVV-fU,1075
-zhinst_utils-0.3.1.dist-info/METADATA,sha256=VI2fKP1BifL7s0yYpW_koQ8vEvunWdWbmvSRBa053tM,2250
-zhinst_utils-0.3.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-zhinst_utils-0.3.1.dist-info/top_level.txt,sha256=s3xDZd7YnFid75jK_ZGTv-9QW9AXR3JLO0SG_S4DuHY,7
-zhinst_utils-0.3.1.dist-info/RECORD,,
+zhinst/utils/shfqc/shfqc.py,sha256=b2IVM21en93UR0hE1Lo5KnzrT4CHjp1ZbjW9Bc2wbEk,24228
+zhinst_utils-0.3.2.dist-info/LICENSE,sha256=7cs0_xLDxPQ2zcHEiV5BrH1B6_2yXWhZidBV7BVV-fU,1075
+zhinst_utils-0.3.2.dist-info/METADATA,sha256=T8ZRs-mulAvG78-Xpv0PNIabE9j1Qob-_3gpZSZERUU,2250
+zhinst_utils-0.3.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+zhinst_utils-0.3.2.dist-info/top_level.txt,sha256=s3xDZd7YnFid75jK_ZGTv-9QW9AXR3JLO0SG_S4DuHY,7
+zhinst_utils-0.3.2.dist-info/RECORD,,
```

