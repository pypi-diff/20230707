# Comparing `tmp/dspawpy-1.0.1-py3-none-any.whl.zip` & `tmp/dspawpy-1.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,20 +1,20 @@
-Zip file size: 74397 bytes, number of entries: 18
--rw-rw-rw-  2.0 fat       48 b- defN 23-Jun-25 01:55 dspawpy/__init__.py
--rw-rw-rw-  2.0 fat    32128 b- defN 23-Jun-30 09:35 dspawpy/plot.py
--rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-04 06:32 dspawpy/analysis/__init__.py
--rw-rw-rw-  2.0 fat    24229 b- defN 23-Jun-29 01:16 dspawpy/analysis/aimdtools.py
--rw-rw-rw-  2.0 fat    20177 b- defN 23-Jun-21 08:08 dspawpy/analysis/vacf.py
--rw-rw-rw-  2.0 fat        0 b- defN 23-May-23 06:07 dspawpy/diffusion/__init__.py
--rw-rw-rw-  2.0 fat     3986 b- defN 23-Jun-21 08:08 dspawpy/diffusion/neb.py
--rw-rw-rw-  2.0 fat    56887 b- defN 23-Jun-29 01:16 dspawpy/diffusion/nebtools.py
--rw-rw-rw-  2.0 fat    11045 b- defN 23-Jun-21 08:08 dspawpy/diffusion/pathfinder.py
--rw-rw-rw-  2.0 fat        0 b- defN 23-Apr-04 08:25 dspawpy/io/__init__.py
--rw-rw-rw-  2.0 fat    62556 b- defN 23-Jun-21 08:08 dspawpy/io/read.py
--rw-rw-rw-  2.0 fat    10548 b- defN 23-Jun-21 09:35 dspawpy/io/structure.py
--rw-rw-rw-  2.0 fat    27765 b- defN 23-Jun-29 01:15 dspawpy/io/utils.py
--rw-rw-rw-  2.0 fat    30401 b- defN 23-Jun-30 09:35 dspawpy/io/write.py
--rw-rw-rw-  2.0 fat     5579 b- defN 23-Jun-30 09:35 dspawpy-1.0.1.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-30 09:35 dspawpy-1.0.1.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        8 b- defN 23-Jun-30 09:35 dspawpy-1.0.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 fat     1422 b- defN 23-Jun-30 09:35 dspawpy-1.0.1.dist-info/RECORD
-18 files, 286871 bytes uncompressed, 72093 bytes compressed:  74.9%
+Zip file size: 74504 bytes, number of entries: 18
+-rw-rw-rw-  2.0 fat       48 b- defN 23-Jul-07 09:45 dspawpy/__init__.py
+-rw-rw-rw-  2.0 fat    32126 b- defN 23-Jul-07 09:41 dspawpy/plot.py
+-rw-rw-rw-  2.0 fat        0 b- defN 23-Jul-07 09:41 dspawpy/analysis/__init__.py
+-rw-rw-rw-  2.0 fat    24227 b- defN 23-Jul-07 09:41 dspawpy/analysis/aimdtools.py
+-rw-rw-rw-  2.0 fat    20177 b- defN 23-Jul-07 09:41 dspawpy/analysis/vacf.py
+-rw-rw-rw-  2.0 fat        0 b- defN 23-Jul-07 09:41 dspawpy/diffusion/__init__.py
+-rw-rw-rw-  2.0 fat     3986 b- defN 23-Jul-07 09:41 dspawpy/diffusion/neb.py
+-rw-rw-rw-  2.0 fat    56885 b- defN 23-Jul-07 09:41 dspawpy/diffusion/nebtools.py
+-rw-rw-rw-  2.0 fat    11045 b- defN 23-Jul-07 09:41 dspawpy/diffusion/pathfinder.py
+-rw-rw-rw-  2.0 fat        0 b- defN 23-Jul-07 09:41 dspawpy/io/__init__.py
+-rw-rw-rw-  2.0 fat    62556 b- defN 23-Jul-07 09:41 dspawpy/io/read.py
+-rw-rw-rw-  2.0 fat    10546 b- defN 23-Jul-07 09:41 dspawpy/io/structure.py
+-rw-rw-rw-  2.0 fat    27763 b- defN 23-Jul-07 09:41 dspawpy/io/utils.py
+-rw-rw-rw-  2.0 fat    29654 b- defN 23-Jul-07 09:41 dspawpy/io/write.py
+-rw-rw-rw-  2.0 fat     6022 b- defN 23-Jul-07 09:47 dspawpy-1.0.2.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-07 09:47 dspawpy-1.0.2.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        8 b- defN 23-Jul-07 09:47 dspawpy-1.0.2.dist-info/top_level.txt
+?rw-rw-r--  2.0 fat     1422 b- defN 23-Jul-07 09:47 dspawpy-1.0.2.dist-info/RECORD
+18 files, 286557 bytes uncompressed, 72200 bytes compressed:  74.8%
```

## zipnote {}

```diff
@@ -36,20 +36,20 @@
 
 Filename: dspawpy/io/utils.py
 Comment: 
 
 Filename: dspawpy/io/write.py
 Comment: 
 
-Filename: dspawpy-1.0.1.dist-info/METADATA
+Filename: dspawpy-1.0.2.dist-info/METADATA
 Comment: 
 
-Filename: dspawpy-1.0.1.dist-info/WHEEL
+Filename: dspawpy-1.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: dspawpy-1.0.1.dist-info/top_level.txt
+Filename: dspawpy-1.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: dspawpy-1.0.1.dist-info/RECORD
+Filename: dspawpy-1.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## dspawpy/__init__.py

```diff
@@ -1,2 +1,2 @@
 # -*- coding: utf-8 -*-
-__version__ = "1.0.1"
+__version__ = "1.0.2"
```

## dspawpy/plot.py

```diff
@@ -3,17 +3,16 @@
 import os
 
 import h5py
 import matplotlib.pyplot as plt
 import numpy as np
 import pandas as pd
 import statsmodels.api as sm
-from scipy.interpolate import interp1d
-
 from dspawpy.io.read import load_h5
+from scipy.interpolate import interp1d
 
 
 def average_along_axis(
     datafile="potential.h5",
     task: str = "potential",
     axis=2,
     smooth=False,
```

## dspawpy/analysis/aimdtools.py

```diff
@@ -1,18 +1,17 @@
 # -*- coding: utf-8 -*-
 import os
 from typing import List, Union
 
 import matplotlib.pyplot as plt
 import numpy as np
+from dspawpy.io.structure import build_Structures_from_datafile
 from pymatgen.core import Structure
 from scipy.ndimage import gaussian_filter1d
 
-from dspawpy.io.structure import build_Structures_from_datafile
-
 
 class MSD:
     # 用于实际计算均方差的类，摘自pymatgen开源项目
     def __init__(
         self,
         structures: List[Structure],
         select: Union[str, List[int]] = "all",
```

## dspawpy/diffusion/nebtools.py

```diff
@@ -7,15 +7,14 @@
 import numpy as np
 import pandas as pd
 
 np.set_printoptions(suppress=True)  # 不使用科学计数法
 import zipfile
 
 import matplotlib.pyplot as plt
-
 from dspawpy.io.structure import build_Structures_from_datafile
 from dspawpy.io.utils import get_ele_from_h5
 
 
 def _zip_folder(folder_path, output_path):
     with zipfile.ZipFile(output_path, "w", zipfile.ZIP_DEFLATED) as zipf:
         for root, _, files in os.walk(folder_path):
```

## dspawpy/io/structure.py

```diff
@@ -1,15 +1,14 @@
 # -*- coding: utf-8 -*-
 import re
 from typing import List, Union
 
 import numpy as np
-from pymatgen.core import Structure
-
 from dspawpy.io.read import get_lines_without_comment, get_sinfo
+from pymatgen.core import Structure
 
 
 def build_Structures_from_datafile(
     datafile: Union[str, List[str]], si=None, ele=None, ai=None, fmt=None
 ) -> List[Structure]:
     r"""读取一/多个h5/json文件，返回pymatgen的Structures列表
```

## dspawpy/io/utils.py

```diff
@@ -3,20 +3,19 @@
 # see https://wiki.fysik.dtu.dk/ase/index.html
 
 import os
 from typing import List
 
 import numpy as np
 import pandas as pd
+from dspawpy.io.read import get_ele_from_h5
 from pymatgen.electronic_structure.core import OrbitalType
 from pymatgen.electronic_structure.dos import CompleteDos
 from scipy import integrate
 
-from dspawpy.io.read import get_ele_from_h5
-
 Na = 6.02214179e23  # 阿伏伽德罗常数 单位 /mol
 h = 6.6260696e-34  # 普朗克常数 单位J*s
 kB = 1.3806503e-23  # 玻尔兹曼常数 J/K
 R = Na * kB  # 理想气体常数 J/(K*mol)
 amu = 1.66053906660e-27  # 原子质量单位 kg
 k = 1.380649e-23 / 1.602176634e-19  # eV/K
 atomic_masses_iupac2016 = np.array(
```

## dspawpy/io/write.py

```diff
@@ -1,15 +1,14 @@
 # -*- coding: utf-8 -*-
 import json
 import os
 
 import numpy as np
-from pymatgen.core.structure import Structure
-
 from dspawpy.io.read import _get_lammps_non_orthogonal_box, load_h5
+from pymatgen.core.structure import Structure
 
 
 def _write_xyz_traj(
     structures,
     xyzfile="aimdTraj.xyz",
 ):
     r"""保存xyz格式的轨迹文件
@@ -125,52 +124,41 @@
     in_filename : str
         包含电子体系信息的json或h5文件路径
     data_type: str
         数据类型，支持 "rho", "potential", "elf", "pcharge", "rhoBound"
     out_filename : str
         输出文件路径, 默认 "DS-PAW.vesta"
     subtype : str
-        用于指定data_type的数据子类型，目前仅支持 TotalLocalPotential（对应potential.type = total），默认为None，将读取 potential 的 TotalElectrostaticPotential 数据
+        用于指定data_type的数据子类型，默认为None，将读取 potential 的 TotalElectrostaticPotential 数据
 
     Returns
     --------
     out_filename : file
         VESTA格式的文件
 
     Examples
     --------
     >>> from dspawpy.io.write import write_VESTA
     >>> write_VESTA("/data/home/hzw1002/dspawpy_repo/test/2.2/rho.json", "rho", out_filename='/data/home/hzw1002/dspawpy_repo/test/out/rho.json')
     """
-    if subtype is not None:
-        assert (
-            data_type == "potential" and subtype == "TotalLocalPotential"
-        ), '目前仅支持"potential"的"TotalLocalPotential"子类'
-
     if in_filename.endswith(".h5"):
         data = load_h5(in_filename)
         if data_type == "rho" or data_type == "rhoBound":
             _write_VESTA_format(data, ["/Rho/TotalCharge"], out_filename)
         elif data_type == "potential":
-            if subtype == "TotalLocalPotential":
-                _write_VESTA_format(
-                    data,
-                    [
-                        "/Potential/TotalLocalPotential",
-                    ],
-                    out_filename,
-                )
-            else:
-                _write_VESTA_format(
-                    data,
-                    [
-                        "/Potential/TotalElectrostaticPotential",
-                    ],
-                    out_filename,
-                )
+            if subtype is None:
+                subtype = "TotalElectrostaticPotential"
+            _write_VESTA_format(
+                data,
+                [
+                    f"/Potential/{subtype}",
+                ],
+                out_filename,
+            )
+            print("--> saved to ", out_filename)
         elif data_type == "elf":
             _write_VESTA_format(data, ["/ELF/TotalELF"], out_filename)
         elif data_type == "pcharge":
             _write_VESTA_format(data, ["/Pcharge/1/TotalCharge"], out_filename)
         else:
             raise NotImplementedError("仅支持rho/potential/elf/pcharge/rhoBound")
 
@@ -178,30 +166,23 @@
         with open(in_filename, "r") as fin:
             data = json.load(fin)
         if data_type == "rho" or data_type == "rhoBound":
             _write_VESTA_format_json(
                 data["AtomInfo"], [data["Rho"]["TotalCharge"]], out_filename
             )
         elif data_type == "potential":
-            if subtype == "TotalLocalPotential":
-                _write_VESTA_format_json(
-                    data["AtomInfo"],
-                    [
-                        data["Potential"]["TotalLocalPotential"],
-                    ],
-                    out_filename,
-                )
-            else:
-                _write_VESTA_format_json(
-                    data["AtomInfo"],
-                    [
-                        data["Potential"]["TotalElectrostaticPotential"],
-                    ],
-                    out_filename,
-                )
+            if subtype is None:
+                subtype = "TotalElectrostaticPotential"
+            _write_VESTA_format_json(
+                data["AtomInfo"],
+                [
+                    data["Potential"][subtype],
+                ],
+                out_filename,
+            )
         elif data_type == "elf":
             _write_VESTA_format_json(
                 data["AtomInfo"], [data["ELF"]["TotalELF"]], out_filename
             )
         elif data_type == "pcharge":
             _write_VESTA_format_json(
                 data["AtomInfo"], [data["Pcharge"][0]["TotalCharge"]], out_filename
```

## Comparing `dspawpy-1.0.1.dist-info/METADATA` & `dspawpy-1.0.2.dist-info/METADATA`

 * *Files 5% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: dspawpy
-Version: 1.0.1
+Version: 1.0.2
 Summary: Tools for dspaw
 Home-page: http://www.hzwtech.com/
 Author: Hzwtech
 Author-email: ZhengZhilin@hzwtech.com
 License: MIT
 Requires-Python: >=3
 Description-Content-Type: text/markdown
@@ -32,14 +32,22 @@
 
 再重新用pip安装。
 
 详见 https://stackoverflow.com/questions/75542688/conda-installed-pip-failed-to-find-packages/75542962#75542962
 
 ## 版本更新简述
 
+### 1.0.2
+
+- BUG修复：  当存在Fix或Mag信息时，structure.as 坐标类型可能解析错误的问题
+- 功能强化： 预览NEB链条函数改名 write_xyz(json)_chain，增加dst参数制定保存路径
+- 功能强化： potential 中数据集不预作限制
+- 功能强化： get_lagtime_msd, get_lagtime_rmsd 自动从数据文件中读取timestep（以前必须手动指定）
+- 细节修改： 优化部分提示语句
+
 ### 1.0.1
 
 - BUG修复： to_file绑定filename参数，避免老版本pymatgen的兼容性问题
 - BUG修复： average_along_axis的task参数改成大小写敏感，避免rhoBound任务类型解析错误
 - 功能强化： 将文件存入不存在的目录前，先创建（支持相对路径）
 - 功能强化： write_VESTA和average_along_axis增加subtype参数，指定TotalLocalPotential数据
```

## Comparing `dspawpy-1.0.1.dist-info/RECORD` & `dspawpy-1.0.2.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,18 +1,18 @@
-dspawpy/__init__.py,sha256=VXg2fqcyJ7ncsvz1_mWntEY6sohgvbXekZ4ECgpQqWE,48
-dspawpy/plot.py,sha256=REZKrBxCEf8V6kaSUpSI2p0yINhTHH-UJ6XL4ZGFyoA,32128
+dspawpy/__init__.py,sha256=EI-j10hLYbIvV2PUEKJKO7nzOR5uw3i_irbSGbHJOVw,48
+dspawpy/plot.py,sha256=djlwo_8uj5G6buvY0iiZqjhnC8a8DqpdgsLq3GwuztE,32126
 dspawpy/analysis/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-dspawpy/analysis/aimdtools.py,sha256=FtyLlo_hvhF8CSLBEYmCDe0ysfRqQI7bCX1Ms_GeeJA,24229
+dspawpy/analysis/aimdtools.py,sha256=cseRcOApPIPZ1BSDEfLAkSwkVbf8Fm4eD11w0cUCh7c,24227
 dspawpy/analysis/vacf.py,sha256=Jj6t7D3FoxBKrjqkV4MVATcucKVW0mRG8aBAKdR6MQk,20177
 dspawpy/diffusion/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dspawpy/diffusion/neb.py,sha256=axFwZTg5HV_RIbZ1welrZAH_ayAH-4tswzjgkJZXugU,3986
-dspawpy/diffusion/nebtools.py,sha256=GGW43HDpHuUGnZXC3sZLvLUSHw-Mv712AKpR3feVPvw,56887
+dspawpy/diffusion/nebtools.py,sha256=i__YpW33JQlyRZsxNPgK8uDoF-r6b7YlS1ESwpyzaCY,56885
 dspawpy/diffusion/pathfinder.py,sha256=HhCVoh42Q2qIksBAruZ1atULfR5D55uzZvbaCtUxSig,11045
 dspawpy/io/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 dspawpy/io/read.py,sha256=tgcUjawulYsaR0x9aAsdvtNKlovUq7jLARYYQQ6v1DE,62556
-dspawpy/io/structure.py,sha256=DZfyoNBcWCeeJL2plJkwpQfPUiUUxmq3DdziFp2nS2w,10548
-dspawpy/io/utils.py,sha256=eWocKo11ApElBSFNrJ4QUuiVadQA2deyXpVQ9BrH7bE,27765
-dspawpy/io/write.py,sha256=D3b2dSKWskXwgzVXHqopQ4fz1jm9naBoRbl9Dlzc7LM,30401
-dspawpy-1.0.1.dist-info/METADATA,sha256=77MyK4yJ8GTZVQQV3dTmyZBdFqeqoTf60i-b9EwEs60,5579
-dspawpy-1.0.1.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-dspawpy-1.0.1.dist-info/top_level.txt,sha256=esEMNTnd880qHE4wkZVKM3gzqZMuOobS886owAyaUmA,8
-dspawpy-1.0.1.dist-info/RECORD,,
+dspawpy/io/structure.py,sha256=RlNQ4Up7YAguu7hUhKUN4mm7xwojRW0wF9MwCIrwWg0,10546
+dspawpy/io/utils.py,sha256=uEH9JQQWp8odP0FGKqFeJ5veSzPq3RzvOskHtOitkW8,27763
+dspawpy/io/write.py,sha256=3_KA9gK7bIKa6iz8dlYDDjWqByCKzcCK0tz2Y5Cl-nY,29654
+dspawpy-1.0.2.dist-info/METADATA,sha256=y3MdwM2h2Q6aUNzunb2uHqO1b2jTMsmVzYd8FOxL-Ys,6022
+dspawpy-1.0.2.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
+dspawpy-1.0.2.dist-info/top_level.txt,sha256=esEMNTnd880qHE4wkZVKM3gzqZMuOobS886owAyaUmA,8
+dspawpy-1.0.2.dist-info/RECORD,,
```

